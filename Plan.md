# Планирование автоматизации тестирования

## Перечень автоматизируемых сценариев

### Описание формата значений полей формы

Корректными значениями, которые принимаются в поля для ввода платежных данных, являются:

- Номер карты
  - 16 цифр
  - предустановленный набор известных SUT номеров - в файле [`data.json`](gate-simulator/data.json) (далее - "карта 1" и "карта 2")
- Год
  - две цифры года (отсчет принимается ведущимся с 2000 года)
  - не ранее текущего года
  - стандартный ввод для тестов - **текущий год**
- Месяц
  - цифры от 01 до 12
  - если год указан текущий - число не менее номера текущего месяца
  - в остальных случаях - набор произвольный
  - стандартный ввод для тестов - **текущий месяц**
- Владелец
  - буквы латинского алфавита
  - стандартный ввод для тестов - **имя и фамилия держателя карты**
- CVC/CVV
  - 3 цифры
  - стандартный ввод для тестов - **111**

### Список сценариев

#### Позитивные сценарии

1. Покупка билетов: корректные данные по карте 1 с ожиданием сообщения об успехе от сервера
   - **уникальное имя**: `Card1BuyWithDefaultInputs`
   - Данные формы
     - номер карты 1: 4444 4444 4444 4441
     - остальные поля - корректные значения
   - Ожидаемый результат
     - WEB: появление окна "Операция одобрена Банком"
     - DB: появление записи со свойством `payment_entity: APPROVED`
2. Покупка билетов в кредит: корректные данные по карте 1 с ожиданием сообщения об успехе от сервера
   - **уникальное имя**: `Card1CreditWithDefaultInputs`
   - Данные формы
     - аналогично предыдущему сценарию
   - Ожидаемый результат
     - WEB: появление окна "Операция одобрена Банком"
     - DB: появление записи со свойством `credit_request_entity: APPROVED`
3. Покупка билетов: корректные данные по карте 2 с ожиданием сообщения об отказе
   - **уникальное имя**: `Card2BuyWithDefaultInputs`
   - Данные формы
     - номер карты 1: 4444 4444 4444 4442
     - остальные поля - корректные значения
   - Ожидаемый результат
     - WEB: появление окна "Ошибка! Банк отказал в проведении операции"
     - DB: появление записи со свойством `payment_entity: DECLINED`
4. Покупка билетов в кредит: корректные данные по карте 2 с ожиданием сообщения об отказе
   - **уникальное имя**: `Card2CreditWithDefaultInputs`
   - Данные формы
     - аналогично предыдущему сценарию
   - Ожидаемый результат
     - WEB: появление окна "Ошибка! Банк отказал в проведении операции"
     - DB: появление записи со свойством `credit_request_entity: DECLINED`

#### Негативные сценарии

5. Покупка билетов: Отсутствие ввода в поле (номер карты)
   - **уникальное имя**: `BuyNoCardInput`
   - Данные формы
     - поле "номер карты" оставлено пустым
     - остальные поля - корректные значения
   - Ожидаемый результат
     - WEB: появление сообщения "Неверный формат" под полем "номер карты"
     - DB: отсутствие новой записи
6. Покупка билетов: Отсутствие ввода в поле (год)
   - **уникальное имя**: `BuyNoDueYearInput`
   - Данные формы
     - поле "год" оставлено пустым
     - остальные поля - корректные значения
   - Ожидаемый результат
     - WEB: появление сообщения "Неверный формат" под полем "год"
     - DB: отсутствие новой записи
7. Покупка билетов: Отсутствие ввода в поле (месяц)
   - **уникальное имя**: `BuyNoDueMonthInput`
   - Данные формы
     - поле "месяц" оставлено пустым
     - остальные поля - корректные значения
   - Ожидаемый результат
     - WEB: появление сообщения "Неверный формат" под полем "месяц"
     - DB: отсутствие новой записи
8. Покупка билетов: Отсутствие ввода в поле (владелец)
   - **уникальное имя**: `BuyNoHolderInput`
   - Данные формы
     - поле "владелец" оставлено пустым
     - остальные поля - корректные значения
   - Ожидаемый результат
     - WEB: появление сообщения "Неверный формат" под полем "владелец"
     - DB: отсутствие новой записи
9. Покупка билетов: Отсутствие ввода в поле (CVC/CVV)
   - **уникальное имя**: `BuyNoCVVInput`
   - Данные формы
     - поле "CVC/CVV" оставлено пустым
     - остальные поля - корректные значения
   - Ожидаемый результат
     - WEB: появление сообщения "Неверный формат" под полем "CVC/CVV"
     - DB: отсутствие новой записи

*Примечание:* тесты №10-14 описывают идентичные тестам №5-9 сценациям, для метода оплаты "Покупка билетов в кредит".

Имена сценариев:

10. **уникальное имя**: `CreditNoCardInput`
11. **уникальное имя**: `CreditNoDueYearInput`
12. **уникальное имя**: `CreditNoDueMonthInput`
13. **уникальное имя**: `CreditNoHolderInput`
14. **уникальное имя**: `CreditNoCVVInput`


15. Покупка билетов: Ввод неизвестного для SUT номера карты с ожиданием сообщения об ошибке
    - **уникальное имя**: `BuyUnknownCardInput`
    - Данные формы
      - номер карты: 5555 5555 5555 5555
      - остальные поля - корректные значения
    - Ожидаемый результат
      - WEB: появление окна "Ошибка! Банк отказал в проведении операции"
      - DB: отсутствие новой записи
16. Покупка билетов: Ввод запрещенных символов в поле "Владелец"
    - **уникальное имя**: `BuyInvalidHolder`
    - Данные формы
      - номер карты 1: 4444 4444 4444 4441
      - владелец: `te$t!`
      - остальные поля - корректные значения
    - Ожидаемый результат
      - WEB: появление сообщения "Неверный формат" под полем "владелец"
      - DB: отсутствие новой записи
17. Покупка билетов: Ввод менее 16 символов в поле "Номер карты"
    - **уникальное имя**: `BuyInvalidCard`
    - Данные формы
      - номер карты: 4444 4444 4444 44
      - остальные поля - корректные значения
    - Ожидаемый результат
      - WEB: появление сообщения "Неверный формат" под полем "номер карты"
      - DB: отсутствие новой записи
18. Покупка билетов: Ввод некорректного срока действия (истекший срок по месяцу)
    - **уникальное имя**: `BuyPastDueMonthInput`
    - Данные формы
      - номер карты 1: 4444 4444 4444 4441
      - месяц: предыдущий (на момент написания документа - номер `01`)
      - год: текущий (на момент написания документа - номер `24`)
      - остальные поля - корректные значения
    - Ожидаемый результат
      - WEB: появление сообщения "Истёк срок действия карты" под полем "Месяц"
      - DB: отсутствие новой записи
19. Покупка билетов: Ввод некорректного срока действия (истекший срок по году)
    - **уникальное имя**: `BuyPastDueYearInput`
    - Данные формы
      - номер карты 1: 4444 4444 4444 4441
      - месяц: текущий (на момент написания документа - номер `02`)
      - год: предыдущий (на момент написания документа - номер `23`)
      - остальные поля - корректные значения
    - Ожидаемый результат
      - WEB: появление сообщения "Истёк срок действия карты" под полем "Год"
      - DB: отсутствие новой записи
20. Покупка билетов: Ввод некорректного срока действия (несуществующий номера месяца и года)
    - **уникальное имя**: `BuyInvalidDueMonthYearInput`
    - Данные формы
      - номер карты 1: 4444 4444 4444 4441
      - месяц: `00`
      - год: `00`
      - остальные поля - корректные значения
    - Ожидаемый результат
      - WEB: появление сообщений "Неверный формат" под полями "Месяц" и "Год"
      - DB: отсутствие новой записи
21. Покупка билетов: Ввод некорректного CVC/CVV
    - **уникальное имя**: `BuyInvalidCVVInput`
    - Данные формы
      - номер карты 1: 4444 4444 4444 4441
      - CVC/CVV: `000`
      - остальные поля - корректные значения
    - Ожидаемый результат
      - WEB: появление сообщения "Неверный формат" под полем CVC/CVV
      - DB: отсутствие новой записи
22. Покупка билетов: Ввод некорректного CVC/CVV
    - **уникальное имя**: `BuyInvalidCVVInputFewNumbers`
    - Данные формы
      - номер карты 1: 4444 4444 4444 4441
      - CVC/CVV: `000`
      - остальные поля - корректные значения
    - Ожидаемый результат
      - WEB: появление сообщения "Неверный формат" под полем CVC/CVV
      - DB: отсутствие новой записи
23. Покупка билетов: Ввод некорректного срока действия №2
    - **уникальное имя**: `BuyFarFutureDueYearInput`
    - Данные формы
      - номер карты 1: 4444 4444 4444 4441
      - год: текущий+10 (на момент написания документа - номер `34`)
      - остальные поля - корректные значения
    - Ожидаемый результат
      - WEB: появление окна "Операция одобрена Банком"
      - DB: появление записи со свойством `payment_entity: APPROVED`

*Примечание:* тесты №24-32 описывают идентичные тестам №15-23 сценациям, для метода оплаты "Покупка билетов в кредит".

Имена сценариев:

24. **уникальное имя**: `CreditUnknownCardInput`
25. **уникальное имя**: `CreditInvalidHolder`
26. **уникальное имя**: `CreditInvalidCard`
27. **уникальное имя**: `CreditPastDueMonthInput`
28. **уникальное имя**: `CreditPastDueYearInput`
29. **уникальное имя**: `CreditInvalidDueMonthYearInput`
30. **уникальное имя**: `CreditInvalidCVVInput`
31. **уникальное имя**: `CreditInvalidCVVInputFewNumbers`
32. **уникальное имя**: `CreditFarFutureDueYearInput`


## Перечень используемых инструментов с обоснованием выбора

Тестовый стек:
- **JUnit** - хорошо подходит для тестирования web-приложений 
- **Selenide** - удобный инструмент автоматизации интерфейса пользователя за счет использования гибких CSS-селекторов
- **Lombok** - еще один удобный инструмент, упрощающий доступ усправление объектами

## Перечень и описание возможных рисков при автоматизации

Основные риски - баги на стороне приложения/симулятора, которые будут давать неожиданные результаты, требующие проверки на корректность.

## Интервальная оценка с учётом рисков в часах

Примерная оценка:
- 0.5 часов на написание каждого автотеста
- до 1 часа на отладку каждого автотеста
- до 2 часов на формирование отчета по тестированию + оформление issue на неожиданные сценарции/баги SUT
Итого: 11 автотестов * (0.5 + 1) + 2 = ~19 часов (~2.5-3 рабочих дня) на подготовку результатов тестирования.

## План сдачи работ: когда будут готовы автотесты, результаты их прогона

- автотесты ожидаются 02/10/24
- отчет и анализ результатов ожидается 03/11/24
